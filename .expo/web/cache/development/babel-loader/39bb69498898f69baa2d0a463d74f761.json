{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { current } from \"@reduxjs/toolkit\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var SimpsonsDataContext = createContext({\n  simpsonsData: [],\n  newSimpsonsData: [],\n  deleteHandler: function deleteHandler(id) {},\n  upHandler: function upHandler(id) {},\n  downHandler: function downHandler(id) {},\n  simpsonsStorageData: []\n});\n\nfunction SimpsonsDataContextProvider(_ref) {\n  var children = _ref.children;\n\n  function array_move(arr, old_index, new_index) {\n    if (new_index >= arr.length) {\n      var k = new_index - arr.length + 1;\n\n      while (k--) {\n        arr.push(undefined);\n      }\n    }\n\n    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n  }\n\n  ;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      simpsons = _useState2[0],\n      setSimpsons = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newSimpsons = _useState4[0],\n      setNewSimpsons = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      simpsonsStorage = _useState8[0],\n      setSimpsonsStorage = _useState8[1];\n\n  var deleteHandler = function deleteHandler(id) {\n    setSimpsons(simpsons.filter(function (e) {\n      return e.id != id;\n    }));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  var upHandler = function upHandler(id_) {\n    array_move(simpsons, simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_), simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) === 0 ? simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) : simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) - 1);\n    setSimpsons(_toConsumableArray(simpsons));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  var downHandler = function () {\n    var _ref2 = _asyncToGenerator(function* (id_) {\n      yield array_move(simpsons, simpsons.map(function (e) {\n        return e.id;\n      }).indexOf(id_), simpsons.map(function (e) {\n        return e.id;\n      }).indexOf(id_) + 1 === simpsons.length ? simpsons.map(function (e) {\n        return e.id;\n      }).indexOf(id_) : simpsons.map(function (e) {\n        return e.id;\n      }).indexOf(id_) + 1);\n      setSimpsons(_toConsumableArray(simpsons));\n      AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    });\n\n    return function downHandler(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  function getStorage() {\n    return _getStorage.apply(this, arguments);\n  }\n\n  function _getStorage() {\n    _getStorage = _asyncToGenerator(function* () {\n      var value = yield AsyncStorage.getItem('@simpsonsStorage');\n      console.log(value);\n\n      if (value) {\n        setSimpsons(JSON.parse(value));\n        return;\n\n        if (simpsons.length > 0) {\n          setSimpsons(simpsonsStorage);\n          return;\n        } else {\n          axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\").then(function (res) {\n            return setSimpsons(res.data);\n          }).finally(function () {\n            return setLoading(false);\n          });\n          console.log(\"DO SOMETHING\");\n        }\n      } else {\n        axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\").then(function (res) {\n          return setSimpsons(res.data);\n        }).finally(function () {\n          return setLoading(false);\n        });\n        console.log(\"DO SOMETHING\");\n      }\n    });\n    return _getStorage.apply(this, arguments);\n  }\n\n  function getStorageUpdate() {\n    return _getStorageUpdate.apply(this, arguments);\n  }\n\n  function _getStorageUpdate() {\n    _getStorageUpdate = _asyncToGenerator(function* () {\n      yield AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    });\n    return _getStorageUpdate.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getStorage();\n  }, []);\n  var value = {\n    simpsonsData: simpsons,\n    newSimpsonsData: newSimpsons,\n    deleteHandler: deleteHandler,\n    upHandler: upHandler,\n    downHandler: downHandler,\n    simpsonsStorageData: simpsonsStorage\n  };\n  return _jsx(SimpsonsDataContext.Provider, {\n    value: value,\n    children: children\n  });\n}\n\nexport default SimpsonsDataContextProvider;","map":{"version":3,"names":["useState","useEffect","createContext","axios","AsyncStorage","current","SimpsonsDataContext","simpsonsData","newSimpsonsData","deleteHandler","id","upHandler","downHandler","simpsonsStorageData","SimpsonsDataContextProvider","children","array_move","arr","old_index","new_index","length","k","push","undefined","splice","simpsons","setSimpsons","newSimpsons","setNewSimpsons","loading","setLoading","simpsonsStorage","setSimpsonsStorage","filter","e","setItem","JSON","stringify","id_","map","indexOf","getStorage","value","getItem","console","log","parse","get","then","res","data","finally","getStorageUpdate"],"sources":["/Users/yigitcanderya/Desktop/starting-project/store/context/simpsons-data.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { current } from \"@reduxjs/toolkit\";\n\nexport const SimpsonsDataContext = createContext({\n    simpsonsData: [],\n    newSimpsonsData: [],\n    deleteHandler: (id) => { },\n    upHandler: (id) => { },\n    downHandler: (id) => { },\n    simpsonsStorageData: [],\n\n});\n\nfunction SimpsonsDataContextProvider({ children }) {\n\n    function array_move(arr, old_index, new_index) {\n        if (new_index >= arr.length) {\n            var k = new_index - arr.length + 1;\n            while (k--) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n    };\n\n    const [simpsons, setSimpsons] = useState([]);\n    const [newSimpsons, setNewSimpsons] = useState([]);\n    const [loading, setLoading] = useState();\n    const [simpsonsStorage, setSimpsonsStorage] = useState();\n\n\n    //Delete Character\n    const deleteHandler = (id) => {\n        setSimpsons(\n            simpsons.filter(\n                e => e.id != id\n            )\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    //Move Up Character\n    const upHandler = (id_) => {\n        array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) === 0 ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) - 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n\n\n    }\n    //Move Down Character\n    const downHandler = async (id_) => {\n        await array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) + 1 === simpsons.length ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) + 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    async function getStorage() {\n        const value = await AsyncStorage.getItem('@simpsonsStorage')\n        console.log(value)\n        if (value) {\n            setSimpsons(JSON.parse(value))\n            return;\n            if (simpsons.length > 0) {\n                setSimpsons(simpsonsStorage);\n                return;\n            } else {\n\n                axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\")\n                    .then((res) => setSimpsons(res.data)).finally(() => setLoading(false));\n                console.log(\"DO SOMETHING\")\n            }\n\n        } else {\n            axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\")\n                .then((res) => setSimpsons(res.data)).finally(() => setLoading(false));\n            console.log(\"DO SOMETHING\")\n        }\n\n    }\n\n    async function getStorageUpdate() {\n        await AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    // useEffect(() => {\n    //     getStorageUpdate()\n    // }, [upHandler, downHandler, deleteHandler])\n\n    // useEffect(() => {\n    //     getStorage();\n    // }, [])\n\n    useEffect(() => {\n        // if (simpsonsStorage) {\n        //     console.log(simpsonsStorage)\n        //     getStorage();\n        //     console.log(\"wtf 2\")\n        //     return;\n        // }\n        // if (simpsons.length > 0) {\n        //     console.log(\"wtf12\")\n        //     return;\n        // }\n        // else {\n        //     axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\")\n        //         .then((res) => setSimpsons(res.data)).finally(() => setLoading(false));\n        // }\n        getStorage()\n\n\n    }, []);\n\n    // const storeData = async (value) => {\n    //     try {\n    //         const simpsonsValue = JSON.stringify(simpsons)\n    //         await AsyncStorage.setItem('@simpsonsStorage', simpsonsValue)\n    //     } catch (e) {\n    //         // saving error\n    //     }\n    // }\n\n    // const getData = async () => {\n\n    //     try {\n    //         const value = await AsyncStorage.getItem('@simpsonsStorage')\n    //         const parseValue = JSON.parse(value)\n    //         if (value !== null) {\n    //             // value previously stored\n    //             setSimpsonsStorage(parseValue)\n    //         }\n    //     } catch (e) {\n\n    //         // error reading value\n    //     }\n    // }\n    // useEffect(() => {\n    //     storeData();\n    // }, []);\n\n    // useEffect(() => {\n    //     getData();\n    // }, []);\n\n    const value = {\n        simpsonsData: simpsons,\n        newSimpsonsData: newSimpsons,\n        deleteHandler: deleteHandler,\n        upHandler: upHandler,\n        downHandler: downHandler,\n        simpsonsStorageData: simpsonsStorage\n    }\n\n    return (\n        <SimpsonsDataContext.Provider value={value} >\n            {children}\n        </SimpsonsDataContext.Provider>)\n}\n\nexport default SimpsonsDataContextProvider"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,aAAT,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,OAAT,QAAwB,kBAAxB;;AAEA,OAAO,IAAMC,mBAAmB,GAAGJ,aAAa,CAAC;EAC7CK,YAAY,EAAE,EAD+B;EAE7CC,eAAe,EAAE,EAF4B;EAG7CC,aAAa,EAAE,uBAACC,EAAD,EAAQ,CAAG,CAHmB;EAI7CC,SAAS,EAAE,mBAACD,EAAD,EAAQ,CAAG,CAJuB;EAK7CE,WAAW,EAAE,qBAACF,EAAD,EAAQ,CAAG,CALqB;EAM7CG,mBAAmB,EAAE;AANwB,CAAD,CAAzC;;AAUP,SAASC,2BAAT,OAAmD;EAAA,IAAZC,QAAY,QAAZA,QAAY;;EAE/C,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,SAAzB,EAAoCC,SAApC,EAA+C;IAC3C,IAAIA,SAAS,IAAIF,GAAG,CAACG,MAArB,EAA6B;MACzB,IAAIC,CAAC,GAAGF,SAAS,GAAGF,GAAG,CAACG,MAAhB,GAAyB,CAAjC;;MACA,OAAOC,CAAC,EAAR,EAAY;QACRJ,GAAG,CAACK,IAAJ,CAASC,SAAT;MACH;IACJ;;IACDN,GAAG,CAACO,MAAJ,CAAWL,SAAX,EAAsB,CAAtB,EAAyBF,GAAG,CAACO,MAAJ,CAAWN,SAAX,EAAsB,CAAtB,EAAyB,CAAzB,CAAzB;EACH;;EAAA;;EAED,gBAAgClB,QAAQ,CAAC,EAAD,CAAxC;EAAA;EAAA,IAAOyB,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAAsC1B,QAAQ,CAAC,EAAD,CAA9C;EAAA;EAAA,IAAO2B,WAAP;EAAA,IAAoBC,cAApB;;EACA,iBAA8B5B,QAAQ,EAAtC;EAAA;EAAA,IAAO6B,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAA8C9B,QAAQ,EAAtD;EAAA;EAAA,IAAO+B,eAAP;EAAA,IAAwBC,kBAAxB;;EAIA,IAAMvB,aAAa,GAAG,SAAhBA,aAAgB,CAACC,EAAD,EAAQ;IAC1BgB,WAAW,CACPD,QAAQ,CAACQ,MAAT,CACI,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACxB,EAAF,IAAQA,EAAZ;IAAA,CADL,CADO,CAAX;IAKAN,YAAY,CAAC+B,OAAb,CAAqB,kBAArB,EAAyCC,IAAI,CAACC,SAAL,CAAeZ,QAAf,CAAzC;EACH,CAPD;;EAUA,IAAMd,SAAS,GAAG,SAAZA,SAAY,CAAC2B,GAAD,EAAS;IACvBtB,UAAU,CAACS,QAAD,EAAWA,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;MAAA,OAAIA,CAAC,CAACxB,EAAN;IAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,CAAX,EAAiDb,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;MAAA,OAAIA,CAAC,CAACxB,EAAN;IAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,MAAyC,CAAzC,GAA6Cb,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;MAAA,OAAIA,CAAC,CAACxB,EAAN;IAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,CAA7C,GAAoFb,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;MAAA,OAAIA,CAAC,CAACxB,EAAN;IAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,IAAuC,CAA5K,CAAV;IACAZ,WAAW,oBACHD,QADG,EAAX;IAGArB,YAAY,CAAC+B,OAAb,CAAqB,kBAArB,EAAyCC,IAAI,CAACC,SAAL,CAAeZ,QAAf,CAAzC;EAGH,CARD;;EAUA,IAAMb,WAAW;IAAA,8BAAG,WAAO0B,GAAP,EAAe;MAC/B,MAAMtB,UAAU,CAACS,QAAD,EAAWA,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;QAAA,OAAIA,CAAC,CAACxB,EAAN;MAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,CAAX,EAAiDb,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;QAAA,OAAIA,CAAC,CAACxB,EAAN;MAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,IAAuC,CAAvC,KAA6Cb,QAAQ,CAACL,MAAtD,GAA+DK,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;QAAA,OAAIA,CAAC,CAACxB,EAAN;MAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,CAA/D,GAAsGb,QAAQ,CAACc,GAAT,CAAa,UAAAL,CAAC;QAAA,OAAIA,CAAC,CAACxB,EAAN;MAAA,CAAd,EAAwB8B,OAAxB,CAAgCF,GAAhC,IAAuC,CAA9L,CAAhB;MACAZ,WAAW,oBACHD,QADG,EAAX;MAGArB,YAAY,CAAC+B,OAAb,CAAqB,kBAArB,EAAyCC,IAAI,CAACC,SAAL,CAAeZ,QAAf,CAAzC;IACH,CANgB;;IAAA,gBAAXb,WAAW;MAAA;IAAA;EAAA,GAAjB;;EAvC+C,SA+ChC6B,UA/CgC;IAAA;EAAA;;EAAA;IAAA,gCA+C/C,aAA4B;MACxB,IAAMC,KAAK,SAAStC,YAAY,CAACuC,OAAb,CAAqB,kBAArB,CAApB;MACAC,OAAO,CAACC,GAAR,CAAYH,KAAZ;;MACA,IAAIA,KAAJ,EAAW;QACPhB,WAAW,CAACU,IAAI,CAACU,KAAL,CAAWJ,KAAX,CAAD,CAAX;QACA;;QACA,IAAIjB,QAAQ,CAACL,MAAT,GAAkB,CAAtB,EAAyB;UACrBM,WAAW,CAACK,eAAD,CAAX;UACA;QACH,CAHD,MAGO;UAEH5B,KAAK,CAAC4C,GAAN,CAAU,sDAAV,EACKC,IADL,CACU,UAACC,GAAD;YAAA,OAASvB,WAAW,CAACuB,GAAG,CAACC,IAAL,CAApB;UAAA,CADV,EAC0CC,OAD1C,CACkD;YAAA,OAAMrB,UAAU,CAAC,KAAD,CAAhB;UAAA,CADlD;UAEAc,OAAO,CAACC,GAAR,CAAY,cAAZ;QACH;MAEJ,CAbD,MAaO;QACH1C,KAAK,CAAC4C,GAAN,CAAU,sDAAV,EACKC,IADL,CACU,UAACC,GAAD;UAAA,OAASvB,WAAW,CAACuB,GAAG,CAACC,IAAL,CAApB;QAAA,CADV,EAC0CC,OAD1C,CACkD;UAAA,OAAMrB,UAAU,CAAC,KAAD,CAAhB;QAAA,CADlD;QAEAc,OAAO,CAACC,GAAR,CAAY,cAAZ;MACH;IAEJ,CArE8C;IAAA;EAAA;;EAAA,SAuEhCO,gBAvEgC;IAAA;EAAA;;EAAA;IAAA,sCAuE/C,aAAkC;MAC9B,MAAMhD,YAAY,CAAC+B,OAAb,CAAqB,kBAArB,EAAyCC,IAAI,CAACC,SAAL,CAAeZ,QAAf,CAAzC,CAAN;IACH,CAzE8C;IAAA;EAAA;;EAmF/CxB,SAAS,CAAC,YAAM;IAeZwC,UAAU;EAGb,CAlBQ,EAkBN,EAlBM,CAAT;EAmDA,IAAMC,KAAK,GAAG;IACVnC,YAAY,EAAEkB,QADJ;IAEVjB,eAAe,EAAEmB,WAFP;IAGVlB,aAAa,EAAEA,aAHL;IAIVE,SAAS,EAAEA,SAJD;IAKVC,WAAW,EAAEA,WALH;IAMVC,mBAAmB,EAAEkB;EANX,CAAd;EASA,OACI,KAAC,mBAAD,CAAqB,QAArB;IAA8B,KAAK,EAAEW,KAArC;IAAA,UACK3B;EADL,EADJ;AAIH;;AAED,eAAeD,2BAAf"},"metadata":{},"sourceType":"module"}
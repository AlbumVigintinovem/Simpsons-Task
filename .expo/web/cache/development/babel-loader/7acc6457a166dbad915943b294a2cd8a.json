{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var SimpsonsDataContext = createContext({\n  simpsonsData: [],\n  newSimpsonsData: [],\n  deleteHandler: function deleteHandler(id) {},\n  upHandler: function upHandler(id) {},\n  downHandler: function downHandler(id) {},\n  simpsonsStorageData: [],\n  navigation: function navigation() {},\n  setSimpsons: function setSimpsons() {}\n});\n\nfunction SimpsonsDataContextProvider(_ref) {\n  var children = _ref.children;\n  var navigation = useNavigation();\n\n  function array_move(arr, old_index, new_index) {\n    if (new_index >= arr.length) {\n      var k = new_index - arr.length + 1;\n\n      while (k--) {\n        arr.push(undefined);\n      }\n    }\n\n    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n  }\n\n  ;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      simpsons = _useState2[0],\n      setSimpsons = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newSimpsons = _useState4[0],\n      setNewSimpsons = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      simpsonsStorage = _useState8[0],\n      setSimpsonsStorage = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      simpsonsStorageSorted = _useState10[0],\n      setSimpsonsStorageSorted = _useState10[1];\n\n  var deleteHandler = function deleteHandler(id) {\n    var filteredSimpsons = simpsons.filter(function (e) {\n      return e.id != id;\n    });\n    setSimpsons(filteredSimpsons);\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(filteredSimpsons));\n  };\n\n  var upHandler = function upHandler(id_) {\n    array_move(simpsons, simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_), simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) === 0 ? simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) : simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) - 1);\n    setSimpsons(_toConsumableArray(simpsons));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  var downHandler = function downHandler(id_) {\n    array_move(simpsons, simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_), simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) + 1 === simpsons.length ? simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) : simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) + 1);\n    setSimpsons(_toConsumableArray(simpsons));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  function getStorage() {\n    return _getStorage.apply(this, arguments);\n  }\n\n  function _getStorage() {\n    _getStorage = _asyncToGenerator(function* () {\n      var value = yield AsyncStorage.getItem('@simpsonsStorage');\n      var sortedValue = JSON.parse(value).sort();\n      var sortedValue_ = sortedValue.map(function (e) {\n        return e.name;\n      }).sort();\n      console.log(sortedValue_);\n\n      var _loop = function _loop(i) {\n        var selectedSimpsons = JSON.parse(value).find(function (simpson) {\n          return simpson.name === sortedValue_[i];\n        });\n        console.log(selectedSimpsons);\n        simpsonsStorageSorted();\n        return {\n          v: void 0\n        };\n      };\n\n      for (var i; i >= sortedValue_.length; i++) {\n        var _ret = _loop(i);\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n\n      ;\n\n      if (value) {\n        setSimpsons(JSON.parse(value));\n        return;\n      } else {\n        axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\").then(function (res) {\n          return setSimpsons(res.data);\n        }).finally(function () {\n          return setLoading(false);\n        });\n      }\n    });\n    return _getStorage.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getStorage();\n  }, []);\n  var value = {\n    simpsonsData: simpsons,\n    newSimpsonsData: newSimpsons,\n    deleteHandler: deleteHandler,\n    upHandler: upHandler,\n    downHandler: downHandler,\n    simpsonsStorageData: simpsonsStorage,\n    navigation: navigation,\n    setSimpsons: setSimpsons\n  };\n  return _jsx(SimpsonsDataContext.Provider, {\n    value: value,\n    children: children\n  });\n}\n\nexport default SimpsonsDataContextProvider;","map":{"version":3,"names":["useState","useEffect","createContext","axios","AsyncStorage","useNavigation","createDrawerNavigator","SimpsonsDataContext","simpsonsData","newSimpsonsData","deleteHandler","id","upHandler","downHandler","simpsonsStorageData","navigation","setSimpsons","SimpsonsDataContextProvider","children","array_move","arr","old_index","new_index","length","k","push","undefined","splice","simpsons","newSimpsons","setNewSimpsons","loading","setLoading","simpsonsStorage","setSimpsonsStorage","simpsonsStorageSorted","setSimpsonsStorageSorted","filteredSimpsons","filter","e","setItem","JSON","stringify","id_","map","indexOf","getStorage","value","getItem","sortedValue","parse","sort","sortedValue_","name","console","log","i","selectedSimpsons","find","simpson","get","then","res","data","finally"],"sources":["/Users/yigitcanderya/Desktop/simpsons-task/store/context/simpsons-data.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { createDrawerNavigator } from \"@react-navigation/drawer\";\n\nexport const SimpsonsDataContext = createContext({\n    simpsonsData: [],\n    newSimpsonsData: [],\n    deleteHandler: (id) => { },\n    upHandler: (id) => { },\n    downHandler: (id) => { },\n    simpsonsStorageData: [],\n    navigation: () => { },\n    setSimpsons: () => { },\n\n});\n\nfunction SimpsonsDataContextProvider({ children }) {\n\n    const navigation = useNavigation();\n\n\n    function array_move(arr, old_index, new_index) {\n        if (new_index >= arr.length) {\n            var k = new_index - arr.length + 1;\n            while (k--) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n    };\n\n    const [simpsons, setSimpsons] = useState([]);\n    const [newSimpsons, setNewSimpsons] = useState([]);\n    const [loading, setLoading] = useState();\n    const [simpsonsStorage, setSimpsonsStorage] = useState();\n    const [simpsonsStorageSorted, setSimpsonsStorageSorted] = useState();\n\n\n    //Delete Character\n    const deleteHandler = (id) => {\n        const filteredSimpsons = simpsons.filter(e => e.id != id);\n        setSimpsons(filteredSimpsons)\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(filteredSimpsons));\n    }\n\n    //Move Up Character\n    const upHandler = (id_) => {\n        array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) === 0 ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) - 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n\n\n    }\n    //Move Down Character\n    const downHandler = (id_) => {\n        array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) + 1 === simpsons.length ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) + 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    // const selectedSimpson = simpsonsCtx.simpsonsData?.find((simpson) => simpson.id === simpId);\n\n    async function getStorage() {\n        const value = await AsyncStorage.getItem('@simpsonsStorage');\n        const sortedValue = JSON.parse(value).sort();\n        const sortedValue_ = sortedValue.map(e => e.name).sort();\n        console.log(sortedValue_)\n        for (let i; i >= sortedValue_.length; i++) {\n            const selectedSimpsons = JSON.parse(value).find((simpson) => simpson.name === sortedValue_[i]);\n            // console.log(selectedSimpsons);\n            console.log(selectedSimpsons);\n            simpsonsStorageSorted(\n                // ...current => [...current, { name: }]\n            )\n            return;\n        };\n\n        // console.log(sortedValue_)\n        if (value) {\n            setSimpsons(JSON.parse(value))\n            return;\n        } else {\n            axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\")\n                .then((res) => setSimpsons(res.data)).finally(() => setLoading(false));\n        }\n\n    }\n\n\n    useEffect(() => {\n        getStorage()\n    }, []);\n\n    const value = {\n        simpsonsData: simpsons,\n        newSimpsonsData: newSimpsons,\n        deleteHandler: deleteHandler,\n        upHandler: upHandler,\n        downHandler: downHandler,\n        simpsonsStorageData: simpsonsStorage,\n        navigation: navigation,\n        setSimpsons: setSimpsons,\n    }\n\n    return (\n        <SimpsonsDataContext.Provider value={value} >\n            {children}\n        </SimpsonsDataContext.Provider>)\n}\n\nexport default SimpsonsDataContextProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}
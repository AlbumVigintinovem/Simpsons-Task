{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var SimpsonsDataContext = createContext({\n  simpsonsData: [],\n  newSimpsonsData: [],\n  deleteHandler: function deleteHandler(id) {},\n  upHandler: function upHandler(id) {},\n  downHandler: function downHandler(id) {},\n  simpsonsStorageData: [],\n  navigation: function navigation() {},\n  setSimpsons: function setSimpsons() {}\n});\n\nfunction SimpsonsDataContextProvider(_ref) {\n  var children = _ref.children;\n  var navigation = useNavigation();\n\n  function array_move(arr, old_index, new_index) {\n    if (new_index >= arr.length) {\n      var k = new_index - arr.length + 1;\n\n      while (k--) {\n        arr.push(undefined);\n      }\n    }\n\n    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n  }\n\n  ;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      simpsons = _useState2[0],\n      setSimpsons = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newSimpsons = _useState4[0],\n      setNewSimpsons = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      simpsonsStorage = _useState8[0],\n      setSimpsonsStorage = _useState8[1];\n\n  var deleteHandler = function deleteHandler(id) {\n    setSimpsons(simpsons.filter(function (e) {\n      return e.id != id;\n    }));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  var upHandler = function upHandler(id_) {\n    array_move(simpsons, simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_), simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) === 0 ? simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) : simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) - 1);\n    setSimpsons(_toConsumableArray(simpsons));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  var downHandler = function downHandler(id_) {\n    array_move(simpsons, simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_), simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) + 1 === simpsons.length ? simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) : simpsons.map(function (e) {\n      return e.id;\n    }).indexOf(id_) + 1);\n    setSimpsons(_toConsumableArray(simpsons));\n    AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n  };\n\n  function getStorage() {\n    return _getStorage.apply(this, arguments);\n  }\n\n  function _getStorage() {\n    _getStorage = _asyncToGenerator(function* () {\n      var value = yield AsyncStorage.getItem('@simpsonsStorage');\n\n      if (value) {\n        setSimpsons(JSON.parse(value));\n        return;\n      } else {\n        axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\").then(function (res) {\n          return setSimpsons(res.data);\n        }).finally(function () {\n          return setLoading(false);\n        });\n      }\n    });\n    return _getStorage.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getStorage();\n  }, []);\n  var value = {\n    simpsonsData: simpsons,\n    newSimpsonsData: newSimpsons,\n    deleteHandler: deleteHandler,\n    upHandler: upHandler,\n    downHandler: downHandler,\n    simpsonsStorageData: simpsonsStorage,\n    navigation: navigation,\n    setSimpsons: setSimpsons\n  };\n  return _jsx(SimpsonsDataContext.Provider, {\n    value: value,\n    children: children\n  });\n}\n\nexport default SimpsonsDataContextProvider;","map":{"version":3,"names":["useState","useEffect","createContext","axios","AsyncStorage","useNavigation","SimpsonsDataContext","simpsonsData","newSimpsonsData","deleteHandler","id","upHandler","downHandler","simpsonsStorageData","navigation","setSimpsons","SimpsonsDataContextProvider","children","array_move","arr","old_index","new_index","length","k","push","undefined","splice","simpsons","newSimpsons","setNewSimpsons","loading","setLoading","simpsonsStorage","setSimpsonsStorage","filter","e","setItem","JSON","stringify","id_","map","indexOf","getStorage","value","getItem","parse","get","then","res","data","finally"],"sources":["/Users/yigitcanderya/Desktop/simpsons-task/store/context/simpsons-data.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nexport const SimpsonsDataContext = createContext({\n    simpsonsData: [],\n    newSimpsonsData: [],\n    deleteHandler: (id) => { },\n    upHandler: (id) => { },\n    downHandler: (id) => { },\n    simpsonsStorageData: [],\n    navigation: () => { },\n    setSimpsons: () => { },\n\n});\n\nfunction SimpsonsDataContextProvider({ children }) {\n\n    const navigation = useNavigation();\n\n\n    function array_move(arr, old_index, new_index) {\n        if (new_index >= arr.length) {\n            var k = new_index - arr.length + 1;\n            while (k--) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n    };\n\n    const [simpsons, setSimpsons] = useState([]);\n    const [newSimpsons, setNewSimpsons] = useState([]);\n    const [loading, setLoading] = useState();\n    const [simpsonsStorage, setSimpsonsStorage] = useState();\n\n\n    //Delete Character\n    const deleteHandler = (id) => {\n        setSimpsons(\n            simpsons.filter(\n                e => e.id != id\n            )\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    //Move Up Character\n    const upHandler = (id_) => {\n        array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) === 0 ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) - 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n\n\n    }\n    //Move Down Character\n    const downHandler = (id_) => {\n        array_move(simpsons, simpsons.map(e => e.id).indexOf(id_), simpsons.map(e => e.id).indexOf(id_) + 1 === simpsons.length ? simpsons.map(e => e.id).indexOf(id_) : simpsons.map(e => e.id).indexOf(id_) + 1);\n        setSimpsons(\n            [...simpsons]\n        )\n        AsyncStorage.setItem(\"@simpsonsStorage\", JSON.stringify(simpsons));\n    }\n\n    async function getStorage() {\n        const value = await AsyncStorage.getItem('@simpsonsStorage')\n        if (value) {\n            setSimpsons(JSON.parse(value))\n            return;\n        } else {\n            axios.get(\"https://5fc9346b2af77700165ae514.mockapi.io/simpsons\")\n                .then((res) => setSimpsons(res.data)).finally(() => setLoading(false));\n        }\n\n    }\n\n\n    useEffect(() => {\n        getStorage()\n    }, []);\n\n    const value = {\n        simpsonsData: simpsons,\n        newSimpsonsData: newSimpsons,\n        deleteHandler: deleteHandler,\n        upHandler: upHandler,\n        downHandler: downHandler,\n        simpsonsStorageData: simpsonsStorage,\n        navigation: navigation,\n        setSimpsons: setSimpsons,\n    }\n\n    return (\n        <SimpsonsDataContext.Provider value={value} >\n            {children}\n        </SimpsonsDataContext.Provider>)\n}\n\nexport default SimpsonsDataContextProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}